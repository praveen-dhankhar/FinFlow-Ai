# PostgreSQL Security Configuration
# These properties are used when running with PostgreSQL in production

# Database Security Settings
app.security.database.enable-auditing=true
app.security.database.enable-soft-delete=false
app.security.database.max-connections=20
app.security.database.min-connections=5
app.security.database.connection-timeout=30000
app.security.database.idle-timeout=600000

# SSL/TLS Configuration for PostgreSQL
spring.datasource.hikari.data-source-properties.ssl=true
spring.datasource.hikari.data-source-properties.sslmode=require
spring.datasource.hikari.data-source-properties.sslrootcert=classpath:ssl/postgresql-ca.pem

# Connection Pool Security
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# Security Headers for PostgreSQL
security.headers.content-type-options=nosniff
security.headers.frame-options=DENY
security.headers.xss-protection=1; mode=block
security.headers.strict-transport-security=max-age=31536000; includeSubDomains

# CORS Configuration for Production
app.security.cors.allowed-origins=https://yourdomain.com,https://www.yourdomain.com
app.security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
app.security.cors.allowed-headers=Authorization,Content-Type,X-Requested-With,Accept,Origin
app.security.cors.allow-credentials=true
app.security.cors.max-age=3600

# JWT Configuration for Production
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration=86400000
app.jwt.refresh-expiration=604800000
app.jwt.issuer=finance-forecast-app
app.jwt.audience=finance-forecast-app-users

# Logging Configuration for Security
logging.level.org.springframework.security=DEBUG
logging.level.com.financeapp.security=DEBUG
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Performance Monitoring
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when_authorized
management.metrics.export.prometheus.enabled=true
